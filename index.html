<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>äº”åéŸ³å†’éšª Ver 3.2.2</title>
    <style>
        :root {
            --pink: #FFD1DC; /* å¤¢å¹»ç²‰ */
            --blue: #BFEAF2; /* ç²‰è— */
            --yellow: #FFF4BD; /* éµé»ƒ */
            --text: #5d4037; /* æš–å’–å•¡è‰² */
            --bg: #FFFBFA;
        }

        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            font-family: "PingFang TC", "Microsoft JhengHei", sans-serif;
            color: var(--text);
        }

        body {
            margin: 0; padding: 0;
            background-color: var(--bg);
            background-image: radial-gradient(var(--pink) 1px, transparent 1px);
            background-size: 30px 30px;
            display: flex; flex-direction: column; align-items: center;
            height: 100vh; overflow: hidden;
        }

        /* é ‚éƒ¨å°è¦½åˆ— */
        .nav-header {
            width: 100%; background: white; padding: 10px 15px;
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 3px solid var(--pink);
            z-index: 100;
        }

        .btn-home {
            text-decoration: none; background: var(--yellow); padding: 8px 15px;
            border-radius: 20px; font-weight: bold; font-size: 0.9rem;
            border: 2px solid var(--text);
            display: flex; align-items: center; gap: 5px;
        }

        .score-board { font-weight: bold; font-size: 1.1rem; color: #ff8fa3; }

        /* é¡Œç›®çœ‹æ¿ */
        .quiz-card {
            background: white; border: 5px solid var(--yellow);
            border-radius: 25px; padding: 10px 30px; margin: 15px 0;
            box-shadow: 0 5px 0 var(--yellow); text-align: center;
            z-index: 50;
        }

        #target-kana { font-size: 3rem; font-weight: bold; }

        /* éŠæˆ²å€åŸŸ */
        #game-container {
            flex-grow: 1; width: 100%; position: relative;
            touch-action: none; overflow: hidden;
        }

        .bubble {
            position: absolute; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.8rem; font-weight: bold; color: white;
            box-shadow: inset -5px -5px 15px rgba(0,0,0,0.1), 0 5px 10px rgba(0,0,0,0.05);
            cursor: pointer; border: 2px solid rgba(255,255,255,0.8);
            user-select: none;
        }

        /* ç‰ˆæœ¬è™Ÿ */
        .version-tag {
            position: fixed; bottom: 8px; right: 12px;
            font-size: 11px; opacity: 0.5;
            background: rgba(255,255,255,0.7);
            padding: 2px 6px; border-radius: 4px;
        }
    </style>
</head>
<body>

    <div class="nav-header">
        <a href="https://liliancir0125.github.io/Rumi_Study_Hall/" class="btn-home">ğŸ  å›å¤§å»³</a>
        <div class="score-board">å¾—åˆ†: <span id="score">0</span></div>
    </div>

    <div class="quiz-card">
        <div style="font-size: 0.8rem; opacity: 0.7;">è«‹æ‰¾å‡ºé€™å€‹ç™¼éŸ³ï¼š</div>
        <div id="target-kana">ã‚</div>
    </div>

    <div id="game-container"></div>

    <div class="version-tag">Ver. 3.2.2</div>

    <script>
        const kanaList = [
            {k: 'ã‚', r: 'a'}, {k: 'ã„', r: 'i'}, {k: 'ã†', r: 'u'}, {k: 'ãˆ', r: 'e'}, {k: 'ãŠ', r: 'o'},
            {k: 'ã‹', r: 'ka'}, {k: 'ã', r: 'ki'}, {k: 'ã', r: 'ku'}, {k: 'ã‘', r: 'ke'}, {k: 'ã“', r: 'ko'},
            {k: 'ã•', r: 'sa'}, {k: 'ã—', r: 'shi'}, {k: 'ã™', r: 'su'}, {k: 'ã›', r: 'se'}, {k: 'ã', r: 'so'}
        ];
        const colors = ['#FFD1DC', '#BFEAF2', '#FFF4BD', '#FFDFD3', '#D0F0C0', '#E0BBE4'];
        
        let score = 0;
        let target = {};
        const container = document.getElementById('game-container');

        function newQuiz() {
            target = kanaList[Math.floor(Math.random() * kanaList.length)];
            document.getElementById('target-kana').innerText = target.k;
        }

        function createBubble(item) {
            const bubble = document.createElement('div');
            bubble.className = 'bubble';
            bubble.innerText = item.r;
            
            const size = 75;
            bubble.style.width = size + 'px';
            bubble.style.height = size + 'px';
            bubble.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            
            // éš¨æ©Ÿä½ç½®
            resetBubblePos(bubble, size);

            bubble.onclick = (e) => {
                e.stopPropagation();
                if (item.r === target.r) {
                    score += 10;
                    document.getElementById('score').innerText = score;
                    // ç­”å°å‹•ç•«
                    bubble.style.transform = 'scale(0)';
                    setTimeout(() => {
                        resetBubblePos(bubble, size);
                        bubble.style.transform = 'scale(1)';
                        bubble.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                        newQuiz();
                    }, 300);
                } else {
                    alert("ä¸å°å–”ï¼é€™æ˜¯ " + item.r);
                }
            };
            container.appendChild(bubble);
        }

        function resetBubblePos(el, size) {
            const maxX = container.offsetWidth - size;
            const maxY = container.offsetHeight - size;
            el.style.left = Math.random() * maxX + 'px';
            el.style.top = Math.random() * maxY + 'px';
        }

        function initGame() {
            container.innerHTML = '';
            // ç”¢ç”Ÿ 10 å€‹æ³¡æ³¡éš¨æ©Ÿå‡ºç¾
            for(let i=0; i<12; i++) {
                const randomKana = kanaList[Math.floor(Math.random() * kanaList.length)];
                createBubble(randomKana);
            }
            newQuiz();
        }

        // ç•¶è¦–çª—å¤§å°æ”¹è®Šæ™‚é‡æ–°æ•´ç†ä½ç½®ï¼Œé˜²æ­¢æ³¡æ³¡è·‘å‡ºå»
        window.onresize = initGame;
        window.onload = initGame;
    </script>
</body>
</html>
