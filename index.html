<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>äº”åéŸ³å†’éšª Ver 3.2.0</title>
    <style>
        :root {
            --pink: #FFD1DC; /* å¤¢å¹»ç²‰ */
            --blue: #BFEAF2; /* ç²‰è— */
            --yellow: #FFF4BD; /* éµé»ƒ */
            --text-color: #7B5E57; /* æš–å’–å•¡è‰²æ–‡å­— */
            --bg-color: #FFFBFA;
        }

        body {
            margin: 0; padding: 0;
            background-color: var(--bg-color);
            font-family: "PingFang TC", "Microsoft JhengHei", sans-serif;
            display: flex; flex-direction: column; align-items: center;
            height: 100vh; overflow: hidden;
            color: var(--text-color);
        }

        /* é ‚éƒ¨æ§åˆ¶åˆ— */
        .nav-header {
            width: 100%; background: white; padding: 10px 15px;
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 3px solid var(--pink);
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            z-index: 100;
        }

        .btn-home {
            text-decoration: none; background: var(--yellow); padding: 8px 15px;
            border-radius: 20px; font-weight: bold; font-size: 0.9rem;
            border: 2px solid var(--text-color);
            display: flex; align-items: center; gap: 5px;
        }

        /* éŠæˆ²å€åŸŸ */
        #game-container {
            flex-grow: 1; width: 100%; position: relative;
            background: radial-gradient(circle, #ffffff 0%, var(--bg-color) 100%);
            touch-action: none;
        }

        .bubble {
            position: absolute; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 2rem; font-weight: bold; color: white;
            box-shadow: inset -5px -5px 15px rgba(0,0,0,0.1), 0 5px 15px rgba(0,0,0,0.05);
            cursor: pointer; transition: transform 0.1s;
            border: 2px solid rgba(255,255,255,0.5);
        }

        /* å•é¡Œçœ‹æ¿ */
        .quiz-card {
            background: white; border: 5px solid var(--yellow);
            border-radius: 25px; padding: 15px 30px; margin-top: 20px;
            box-shadow: 0 8px 0 var(--yellow); text-align: center;
        }

        #target-kana { font-size: 3rem; font-weight: bold; color: var(--text-color); }
        
        .score-board { font-weight: bold; font-size: 1.2rem; color: #FFB7C5; }

        .version-tag { position: fixed; bottom: 8px; right: 12px; font-size: 11px; opacity: 0.5; }
    </style>
</head>
<body>

    <div class="nav-header">
        <a href="https://liliancir0125.github.io/Rumi_Study_Hall/" class="btn-home">ğŸ  å›å¤§å»³</a>
        <div class="score-board">å¾—åˆ†: <span id="score">0</span></div>
    </div>

    <div class="quiz-card">
        <div style="font-size: 0.9rem;">è«‹æ‰¾å‡ºé€™å€‹ç™¼éŸ³ï¼š</div>
        <div id="target-kana">ã‚</div>
    </div>

    <div id="game-container"></div>

    <div class="version-tag">Ver. 3.2.0</div>

    <script>
        const kanaList = [
            {k: 'ã‚', r: 'a'}, {k: 'ã„', r: 'i'}, {k: 'ã†', r: 'u'}, {k: 'ãˆ', r: 'e'}, {k: 'ãŠ', r: 'o'},
            {k: 'ã‹', r: 'ka'}, {k: 'ã', r: 'ki'}, {k: 'ã', r: 'ku'}, {k: 'ã‘', r: 'ke'}, {k: 'ã“', r: 'ko'}
        ];
        const colors = ['#FFD1DC', '#BFEAF2', '#FFF4BD', '#FFDFD3', '#D0F0C0'];
        
        let score = 0;
        let target = {};
        const container = document.getElementById('game-container');

        function initGame() {
            spawnBubbles();
            newQuiz();
        }

        function newQuiz() {
            target = kanaList[Math.floor(Math.random() * kanaList.length)];
            document.getElementById('target-kana').innerText = target.k;
        }

        function spawnBubbles() {
            container.innerHTML = '';
            kanaList.forEach((item, index) => {
                const bubble = document.createElement('div');
                bubble.className = 'bubble';
                bubble.innerText = item.r;
                
                // éš¨æ©Ÿé¡è‰²èˆ‡ä½ç½®
                const size = 80;
                bubble.style.width = size + 'px';
                bubble.style.height = size + 'px';
                bubble.style.backgroundColor = colors[index % colors.length];
                bubble.style.left = Math.random() * (window.innerWidth - size) + 'px';
                bubble.style.top = Math.random() * (container.offsetHeight - size) + 'px';

                bubble.onclick = () => {
                    if (item.r === target.r) {
                        score += 10;
                        document.getElementById('score').innerText = score;
                        bubble.style.transform = 'scale(1.5)';
                        bubble.style.opacity = '0';
                        setTimeout(() => {
                            bubble.style.transform = 'scale(1)';
                            bubble.style.opacity = '1';
                            bubble.style.left = Math.random() * (window.innerWidth - size) + 'px';
                            bubble.style.top = Math.random() * (container.offsetHeight - size) + 'px';
                            newQuiz();
                        }, 300);
                    } else {
                        bubble.style.transform = 'shake 0.5s';
                        alert("ä¸å°å–”ï¼é€™æ˜¯ " + item.r);
                    }
                };
                container.appendChild(bubble);
            });
        }

        window.onload = initGame;
    </script>
</body>
</html>
